/*! 
 * angular-loading-bar v0.8.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2015 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(b,c,d,e,f,g){function h(){d.cancel(j),g.complete(),l=0,k=0}function i(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d?void 0!==d.get(b.url):!1;return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var j,k=0,l=0,m=g.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||i(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===k&&(j=d(function(){g.start()},m)),!a.ignoreLoadingBarOverlay&&(a.forceLoadingBarOverlay||void 0!==a.method&&"GET"!==a.method)&&g.showOverlay(),k++,g.set(l/k)),a},response:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),a):(f.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),b.reject(a)):(f.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b.reject(a))}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=50,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.blockSpinnerTemplate='<div id="loading-bar-overlay"></div><div id="loading-bar-overlay-icon" class="fa fa-clock-o"></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){l||(l=a.get("$animate"));var e=b.find(o).eq(0);c.cancel(n),t||(d.$broadcast("cfpLoadingBar:started"),t=!0,y&&l.enter(p,e,angular.element(e[0].lastChild)),x&&l.enter(r,e,angular.element(e[0].lastChild)),g(z))}function f(){if(!v){v=!0;var a=b.find(o).eq(0);l.enter(s,a,angular.element(a[0].lastChild))}}function g(a){if(t){var b=100*a+"%";q.css("width",b),u=a,w&&(c.cancel(m),m=c(function(){h()},250))}}function h(){if(!(i()>=1)){var a=0,b=i();a=b>=0&&.25>b?(3*Math.random()+3)/100:b>=.25&&.65>b?3*Math.random()/100:b>=.65&&.9>b?2*Math.random()/100:b>=.9&&.99>b?.005:0;var c=i()+a;g(c)}}function i(){return u}function j(){u=0,t=!1}function k(){l||(l=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),g(1),c.cancel(n),n=c(function(){var a=l.leave(p,j);a&&a.then&&a.then(j),l.leave(r),l.leave(s),v=!1},50)}var l,m,n,o=this.parentSelector,p=angular.element(this.loadingBarTemplate),q=p.find("div").eq(0),r=angular.element(this.spinnerTemplate),s=angular.element(this.blockSpinnerTemplate),t=!1,u=0,v=!1,w=this.autoIncrement,x=this.includeSpinner,y=this.includeBar,z=this.startSize;return{start:e,showOverlay:f,set:g,status:i,inc:h,complete:k,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();